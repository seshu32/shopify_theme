{% comment %} Blog Section {% endcomment %}
<section class="py-32 bg-yellow-50">
  <div class="container mx-auto px-6">
    <!-- Section Header -->
    <div class="flex justify-between items-end mb-16">
      <h2 class="text-4xl md:text-5xl font-bold text-gray-800">
        {{ section.settings.section_title | default: "Our Latest News" }}
      </h2>
      {% if section.settings.button_text %}
        <div>
          <a href="{{ section.settings.button_link | default: '/blogs' }}" class="inline-block px-8 py-3 bg-orange-500 text-white rounded-lg font-medium hover:bg-orange-600 transition-colors shadow-lg hover:shadow-xl">
            {{ section.settings.button_text }}
          </a>
        </div>
      {% endif %}
    </div>

    <!-- Blog Grid -->
    <div class="grid lg:grid-cols-3 gap-8">
      {% assign featured_blog = blogs[section.settings.featured_blog] %}
      {% if featured_blog and featured_blog.articles.size > 0 %}
        <!-- Left Column - Large Horizontal Cards -->
        <div class="lg:col-span-2 grid grid-rows-2 gap-8">
          {% for article in featured_blog.articles limit: 2 %}
            <div class="h-full">
              <div class="group h-full">
                <div class="bg-yellow-100 rounded-3xl p-6 h-full border border-yellow-200">
                  <div class="flex gap-6 h-full items-center">
                    <div class="relative w-[280px] aspect-[4/3] rounded-2xl overflow-hidden flex-shrink-0">
                      {% if article.image %}
                        <img src="{{ article.image | image_url: width: 400 }}" alt="{{ article.title }}" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105" />
                      {% else %}
                        <div class="w-full h-full bg-gradient-to-br from-green-100 to-green-200 flex items-center justify-center">
                          <span class="text-6xl text-green-600">ðŸ“°</span>
                        </div>
                      {% endif %}
                    </div>
                    <div class="flex-1">
                      <div class="mb-3">
                        <span class="inline-block px-4 py-1.5 bg-orange-500 text-white text-sm font-medium rounded-lg">
                          {{ article.tags.first | default: "News" }}
                        </span>
                      </div>
                      <h3 class="text-2xl font-bold text-gray-800 mb-3 group-hover:text-gray-600 transition-colors">
                        {{ article.title }}
                      </h3>
                      <p class="text-gray-700 leading-relaxed mb-4">
                        {{ article.excerpt | default: article.content | strip_html | truncate: 120 }}
                      </p>
                      <div class="flex items-center gap-6 text-sm text-gray-600">
                        <div class="flex items-center gap-2">
                          <span>By {{ article.author | default: "Admin" }}</span>
                        </div>
                        <div class="flex items-center gap-2">
                          <span>{{ article.published_at | date: "%B %d, %Y" }}</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          {% endfor %}
        </div>

        <!-- Right Column - Small Vertical Cards -->
        <div class="h-full grid grid-rows-2 gap-8">
          {% for article in featured_blog.articles offset: 2 limit: 2 %}
            <div class="h-full">
              <div class="group h-full">
                <div class="bg-green-50 rounded-3xl p-6 h-full flex flex-col border border-green-100">
                  <div class="relative aspect-[16/10] rounded-2xl overflow-hidden mb-8">
                    {% if article.image %}
                      <img src="{{ article.image | image_url: width: 300 }}" alt="{{ article.title }}" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105" />
                    {% else %}
                      <div class="w-full h-full bg-gradient-to-br from-green-100 to-green-200 flex items-center justify-center">
                        <span class="text-6xl text-green-600">ðŸ“°</span>
                      </div>
                    {% endif %}
                    <div class="absolute top-4 left-4">
                      <span class="inline-block px-3 py-1 bg-orange-500 text-white text-sm font-medium rounded-lg">
                        {{ article.tags.first | default: "News" }}
                      </span>
                    </div>
                  </div>
                  <div class="flex-1 flex flex-col justify-between">
                    <div>
                      <h3 class="text-lg font-bold text-gray-800 mb-3 group-hover:text-gray-600 transition-colors line-clamp-2">
                        {{ article.title }}
                      </h3>
                      <p class="text-gray-700 text-sm line-clamp-2 mb-4">
                        {{ article.excerpt | default: article.content | strip_html | truncate: 80 }}
                      </p>
                    </div>
                    <div class="flex items-center gap-4 text-sm text-gray-600">
                      <div class="flex items-center gap-1">
                        <span>By {{ article.author | default: "Admin" }}</span>
                      </div>
                      <div class="flex items-center gap-1">
                        <span>{{ article.published_at | date: "%b %d" }}</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <!-- Placeholder blog posts when no blog is selected -->
        <div class="lg:col-span-2 grid grid-rows-2 gap-8">
          {% assign default_titles = 'The Benefits of Organic Farming for Your Health,Sustainable Agriculture: Our Commitment to the Future' | split: ',' %}
          {% assign default_excerpts = 'Discover how organic farming practices not only benefit the environment but also provide you with healthier, more nutritious food options for your family.,Learn about our innovative sustainable farming techniques that help preserve the environment while producing high-quality organic products.' | split: ',' %}
          
          {% for title in default_titles %}
            <div class="h-full">
              <div class="group h-full">
                <div class="bg-yellow-100 rounded-3xl p-6 h-full border border-yellow-200">
                  <div class="flex gap-6 h-full items-center">
                    <div class="relative w-[280px] aspect-[4/3] rounded-2xl overflow-hidden flex-shrink-0">
                      <div class="w-full h-full bg-gradient-to-br from-green-100 to-green-200 flex items-center justify-center">
                        <span class="text-6xl text-green-600">ðŸ“°</span>
                      </div>
                    </div>
                    <div class="flex-1">
                      <div class="mb-3">
                        <span class="inline-block px-4 py-1.5 bg-orange-500 text-white text-sm font-medium rounded-lg">
                          Organic
                        </span>
                      </div>
                      <h3 class="text-2xl font-bold text-gray-800 mb-3 group-hover:text-gray-600 transition-colors">
                        {{ title }}
                      </h3>
                      <p class="text-gray-700 leading-relaxed mb-4">
                        {{ default_excerpts[forloop.index0] }}
                      </p>
                      <div class="flex items-center gap-6 text-sm text-gray-600">
                        <div class="flex items-center gap-2">
                          <span>By Admin</span>
                        </div>
                        <div class="flex items-center gap-2">
                          <span>{{ 'now' | date: "%B %d, %Y" }}</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          {% endfor %}
        </div>

        <div class="h-full grid grid-rows-2 gap-8">
          {% assign default_small_titles = 'Tips for Growing Your Own Organic Garden,From Farm to Table: Our Quality Promise' | split: ',' %}
          {% assign default_small_excerpts = 'Start your organic gardening journey with these essential tips for beginners.,Learn about our quality control process from harvest to delivery.' | split: ',' %}
          
          {% for title in default_small_titles %}
            <div class="h-full">
              <div class="group h-full">
                <div class="bg-green-50 rounded-3xl p-6 h-full flex flex-col border border-green-100">
                  <div class="relative aspect-[16/10] rounded-2xl overflow-hidden mb-8">
                    <div class="w-full h-full bg-gradient-to-br from-green-100 to-green-200 flex items-center justify-center">
                      <span class="text-6xl text-green-600">ðŸ“°</span>
                    </div>
                    <div class="absolute top-4 left-4">
                      <span class="inline-block px-3 py-1 bg-orange-500 text-white text-sm font-medium rounded-lg">
                        Tips
                      </span>
                    </div>
                  </div>
                  <div class="flex-1 flex flex-col justify-between">
                    <div>
                      <h3 class="text-lg font-bold text-gray-800 mb-3 group-hover:text-gray-600 transition-colors line-clamp-2">
                        {{ title }}
                      </h3>
                      <p class="text-gray-700 text-sm line-clamp-2 mb-4">
                        {{ default_small_excerpts[forloop.index0] }}
                      </p>
                    </div>
                    <div class="flex items-center gap-4 text-sm text-gray-600">
                      <div class="flex items-center gap-1">
                        <span>By Admin</span>
                      </div>
                      <div class="flex items-center gap-1">
                        <span>{{ 'now' | date: "%b %d" }}</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
      {% endif %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Blog Section",
  "settings": [
    {
      "type": "text",
      "id": "section_title",
      "label": "Section Title",
      "default": "Our Latest News"
    },
    {
      "type": "blog",
      "id": "featured_blog",
      "label": "Featured Blog"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "More Blogs"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button Link",
      "default": "/blogs"
    }
  ],
  "presets": [
    {
      "name": "Blog Section"
    }
  ]
}
{% endschema %} 